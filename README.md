# Что за проект
Cos — сервис, для собора метрики каналов и роликов в TikTok, YouTube, Instagram и Likee. Есть бэкенд с API, фронт для Telegram mini‑app, воркеры‑парсеры и бот.

# Какие технологии используются
- Backend: FastAPI, SQLAlchemy, Pydantic, APScheduler, pika (RabbitMQ), httpx, Alembic, PostgreSQL.
- Парсеры: Playwright, aio-pika (RabbitMQ), httpx/requests.
- Фронт: React + Vite, @telegram-apps/sdk, React Router, Zustand, Chart.js.
- Бот: aiogram.
- Инфраструктура: Docker Compose, RabbitMQ, Postgres, опционально ClickHouse и ELK для логов.
- Тесты: Unittest интеграционные тесты, sqlite+aiosqlite

# Как это работает в общих чертах
1) Пользователь заходит в Telegram mini‑app. Авторизация проходит через Telegram.
2) В бэкенде есть API `/api/v1`, где хранятся пользователи, каналы, прокси, аккаунты, видео(+фото/превью) и история просмотров/лайков/комментариев.
3) Планировщик в бэкенде два раза в день ставит задачи на парсинг в очереди RabbitMQ:
   - 12:00 и 21:00 по Москве, с равномерными сдвигами между каналами.
   - Instagram собирается пакетами; при зависании пакет можно снять ручкой `/api/v1/instagram-batch/release`.
4) Парсеры берут задачи из своих очередей (`parsing_tiktok`, `parsing_youtube`, `parsing_instagram`, `parsing_likee`), заходят на страницы через Playwright/HTTP, забирают метрики и отправляют их обратно в API.
5) Бэкенд сохраняет данные в Postgres и отдает их фронту/боту. Загруженные превью хранятся в `/api/v1/uploads/...`.
6) Пользователи просматривают статистику своих видео в Telegram mini‑app.

# Какие данные собираются/показываются
- Список каналов с ссылкой и названием.
- Для каждого ролика: ссылка, тип соцсети, название/картинка, счётчики просмотров, лайков, комментариев, история изменений (video_history).
- Данные пользователей (Telegram ID, имя, статус, роль), активные прокси и аккаунты, используемые парсерами.

# Когда запускаются парсеры
- По расписанию дважды в день: 12:00 и 21:00 МСК, с небольшим смещением между каналами.
- Instagram запускается пакетом (1 регистраиция на акк); остальные соцсети идут по очереди, чтобы не бомбить сразу все каналы.

# Какие соцсети поддерживаются
- TikTok
- YouTube
- Instagram (нужны аккаунты)
- Likee

========================||||===========================||||==========================

Сервис предназначен для законного мониторинга открытых данных и не нарушает законы или правила площадок.
